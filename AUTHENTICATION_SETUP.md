# Налаштування аутентифікації

## Оновлена система аутентифікації

Система аутентифікації була перероблена для підтримки:
- **Веб-інтерфейсу** (Cookie-based authentication)
- **Мобільного застосунку** (JWT Bearer token authentication)
- **Єдиної бази даних** для обох платформ

## Облікові дані для входу

- **Логін**: `olena_skakunn`
- **Пароль**: `A0982935531a`

Ці дані працюють як у веб-інтерфейсі, так і в мобільному застосунку.

## Як це працює

### Backend (API)

1. **Модель User** - зберігає користувачів у базі даних
2. **AuthApiController** - API endpoint `/api/authapi/login` для мобільного застосунку
3. **AuthController** - веб-контролер для веб-інтерфікації
4. **JWT Authentication** - для API запитів
5. **Cookie Authentication** - для веб-інтерфейсу

### Мобільний застосунок

1. **AuthService** - виконує запит до `/api/authapi/login`
2. Отримує JWT токен
3. Використовує токен для всіх наступних API запитів

### Веб-інтерфейс

1. Користувач вводить логін/пароль на сторінці `/Auth/Login`
2. Backend перевіряє облікові дані
3. Створює Cookie з claims
4. Користувач авторизований для веб-інтерфейсу

## Налаштування URL

### Backend API
За замовчуванням:
- HTTP: `http://localhost:5019`
- HTTPS: `https://localhost:7252`

### Мобільний застосунок
URL налаштований в:
- `ProcureRiskAnalyzer.Client/Services/AuthService.cs`
- `ProcureRiskAnalyzer.Client/Services/ApiService.cs`

Якщо ваш backend працює на іншому порту, змініть URL в цих файлах.

## Синхронізація даних

Всі дані (Suppliers, Tenders, Categories) зберігаються в одній базі даних (`procure.db`), тому:
- ✅ Дані, додані в веб-інтерфейсі, відображаються в мобільному застосунку
- ✅ Дані, додані в мобільному застосунку, відображаються в веб-інтерфейсі
- ✅ Всі зміни синхронізовані через API

## Тестування

### Веб-інтерфейс:
1. Запустіть backend: `dotnet run` в `ProcureRiskAnalyzer.Web`
2. Відкрийте браузер: `http://localhost:5019`
3. Перейдіть на `/Auth/Login`
4. Введіть: `olena_skakunn` / `A0982935531a`

### Мобільний застосунок:
1. Переконайтеся, що backend запущений
2. Запустіть MAUI додаток
3. Введіть: `olena_skakunn` / `A0982935531a`
4. Перевірте, що дані відображаються

## Створення нових користувачів

Для створення нового користувача використовуйте API endpoint:
```
POST /api/authapi/register
{
  "username": "new_user",
  "password": "password123"
}
```

Або додайте користувача безпосередньо в базу даних через міграції.

